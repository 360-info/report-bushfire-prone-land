---
title: Regional Bushfire Hazards
subtitle: Australian regional suburbs and their exposure to bushfires
format:
  360-analysis-html: default
author: Dean Marchiori
date: last-modified
code-fold: true
execute:
  warning: false 
  error: false
  echo: false
---

```{r}
library(sf)
library(tidyverse)
library(tmap)
library(gganimate)

theme_set(theme_minimal())
```

## Introduction

Australia is subject to a range of natural perils, the severity of many are induced by changed in climate. 

Bushfire or wildfire risk is a persistent threat in the Australian summer, impacting predominantly rural and 
remote communities due to proximity to bushfire prone land. 

- To what extent are rural and remote communities exposed to bushfire hazards and bushfire prone lands?  
- How are governments classifying and protecting bushfire prone land?  
- What planning, development and risk management mechanisms are in place inside these higher risk zones?  
- How does this relate to actual historical bushfire activity over time?  

## Bushfire Prone Land  

Each state in Australia maintains a spatial dataset of 'Bushfire Prone Land' or similar. These data are used to inform
planning, risk and building decisions. The implementation of this instrument varies considerably state to state. 

This visualization shows the proportion of bushfire prone land in each Australian suburb.

```{r}
aus <- read_sf(here::here("data/final/aus.gpkg")) |>
    filter(
        !st_is_empty(geom)
    ) |>
    mutate(`Bushfire Prone Area (%)` = bf_area_pct)
```

```{r}
#| fig-cap: "A map of Australian suburbs showing the proportion of land area classified as Bushfire Prone Land by the relevant state authority. Note each state has vastly different criteria to classifying bushfire prone land." 
#| fig-height: 10
#| fig-width: 12

tm_shape(aus) +
tm_polygons(col = "Bushfire Prone Area (%)", fill.alpha = 0.3,border.alpha = 0)
```


## NSW Fire History  

Exploring the fire history in rural NSW as an example to contextualize the public policy implications of bushfire prone land classifications.  


```{r}
fires <- read_sf(here::here("data/final/fire_history.gpkg"))
```

Fire counts by year since records began

```{r}
#| fig-cap: "Comparing total number of annual fires for both prescribed burns and wildfires.  These data are aggregated by NPWS, however clearly the data are not complete for early 20th century. If used, suggest we subset to more recent years." 
fires |>
    st_drop_geometry() |>
    count(type, year) |>
    ggplot(aes(year, n, fill = type)) +
    geom_col() +
    facet_wrap(~type, ncol = 1) +
    scale_fill_manual(values = c("orange", "red")) +
    theme(legend.position="bottom") +
    labs(title = "Count of fires in NSW since 1900",
    subtitle = "Showing both wildfires and prescribed burns")
```


> Note: Could we overlay climate cycles?

```{r}
#| fig-cap: "These data were obtain by aggregating the spatial extent of the burned area polygons in the NSWPW fire history dataset."
year_area <- fires |>
    filter(
        type == "Wildfire",
        year > 1970
    ) |>
    mutate(area = units::set_units(st_area(geom), "km2")) |>
    group_by(year) |>
    summarise(total_area_burned = as.numeric(sum(area)))

ggplot(year_area, aes(year, total_area_burned)) +
    geom_col(fill = "red") +
    labs(
        title = "How severe have wildfires been in the last 50 years?",
        subtitle = "Showing total area burned (km^2) for all fires in each year since 1970./nNotice the cyclical appearance of highly severe fire years.",
        x = "Year",
        y = "Total area burned in year (sq.km)"
    )
```


```{r}
#| eval: false
x <- fires |>
    filter(
        year %in% c(2017, 2018),
        type == "Wildfire"
    ) |>
    mutate(year = as.integer(year)) |>
    group_by(year) |>
    summarise(geometry = st_union(geom)) |>
    st_set_crs(NA)


p <- ggplot(x) +
    geom_sf(aes(group = year)) +
    labs(title = "year: {previous_state}") +
    transition_states(year, state_length = 1, transition_length = 1)

animate(p)
```

## Case Study: Ulladulla  

An example case study of one regional area on the NSW south coast. The image on the left shows the bushfire prone land categories (see below table). The image on the right overlays the historical burned area polygons. Notice the strong correlation (at least visually) between high risk bushfire prone land and actual land impacted by recent fire activity.  Lower risk areas are much less impacted.    

![](img/360_bfp.png)  


Category | Description | Risk Rating  
------|-----------
Vegetation Category 1 |  Areas of forest, woodlands, heaths (tall and short), forested wetlands and timber plantations. | High
Vegetation Category 2  | Rainforests. Lower risk vegetation parcels. These vegetation parcels represent a lower bush fire risk to surrounding development and consist of: - Remnant vegetation; - Land with ongoing land management practices that actively reduces bush fire risk | Low  
Vegetation Category 3 | Grasslands, freshwater wetlands, semi-arid woodlands, alpine complex and arid shrublands. | Medium  
Buffer | Buffers are created based on the bushfire vegetation, with buffering distance being 100 metres for vegetation category 1 and 30 metres for vegetation category 2 and 3. |   



